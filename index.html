<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MMDiT · 多模态协同数据生成（云端部署界面）</title>
  <meta name="description" content="基于 MMDiT（Multi-Modal Diffusion Transformer）的多模态协同数据生成模型前端页面" />

  <style>
    :root{
      --ink:#0b2d5c;
      --line:#1d3f77;
      --card:#ffffffcc;
      --card2:#ffffffb3;
      --soft:#f3f6fbcc;
      --shadow: 0 14px 46px rgba(0,0,0,.22);
      --radius:14px;

      --muted:#5b6b85;
      --label:#1c2f55;
      --field:#f4f6fa;
      --field-border:#213b6a;

      --tag:#e7eefb;
      --tag-line:#2b4a83;

      --green:#eaf7ea;
      --orange:#fff2e8;
      --yellow:#fff8d6;
      --blue:#e9f2ff;
      --gray:#f1f3f7;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
                   Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color:#10213d;
      min-height:100vh;
      overflow-x:hidden;

      /* 背景图与前面页面一致 */
      background: url("assets/bg.jpg") center/cover no-repeat fixed;
    }
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        linear-gradient(to bottom, rgba(255,255,255,.75), rgba(255,255,255,.65)),
        radial-gradient(1200px 700px at 15% 10%, rgba(255,255,255,.35), transparent 60%);
      pointer-events:none;
      z-index:-1;
    }

    .wrap{
      max-width: 1300px;
      margin:0 auto;
      padding: 22px 16px 40px;
    }

    .titlebar{
      border-bottom: 4px solid var(--line);
      padding-bottom: 10px;
      margin-bottom: 14px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
    }
    .titlebar h1{
      margin:0;
      font-size: 36px;
      letter-spacing:.3px;
      color: var(--ink);
      font-weight: 900;
    }
    .titlebar .sub{
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.5;
      max-width: 72ch;
    }
    .badge{
      flex:0 0 auto;
      padding: 8px 10px;
      border: 1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.75);
      box-shadow: 0 6px 18px rgba(0,0,0,.10);
      font-family: var(--mono);
      font-size: 12px;
      color: #27406e;
      white-space:nowrap;
    }

    .panel{
      background: rgba(255,255,255,.76);
      border: 2px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* 顶部“控件区” */
    .gridTop{
      display:grid;
      grid-template-columns: 220px 320px 220px 320px 1fr;
      gap: 10px;
      padding: 12px;
      background: rgba(233,242,255,.55);
      border-bottom: 2px solid var(--line);
    }
    @media (max-width: 1180px){
      .gridTop{ grid-template-columns: 1fr 1fr; }
    }

    .block{
      border: 1.6px solid rgba(29,63,119,.75);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,.74);
    }
    .block .lbl{
      font-weight: 900;
      color: var(--label);
      font-size: 14px;
      margin-bottom: 8px;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
    }

    select, input[type="text"], input[type="number"]{
      width:100%;
      padding: 10px 10px;
      border-radius: 10px;
      border: 2px solid rgba(33,59,106,.65);
      background: var(--field);
      outline:none;
      font-size: 13.5px;
      font-family: ui-sans-serif, system-ui;
    }
    input.mono{ font-family: var(--mono); font-size: 12.5px; }

    .btn{
      width:100%;
      padding: 12px 10px;
      border-radius: 10px;
      border: 2px solid rgba(33,59,106,.75);
      background: rgba(255,255,255,.9);
      font-weight: 900;
      color:#17315f;
      cursor:pointer;
      transition: transform .08s ease, background .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); background: white; }
    .btn:active{ transform: translateY(0px); }

    /* 主体：左侧图 + 右侧配置 */
    .main{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap: 12px;
      padding: 12px;
    }
    @media (max-width: 1080px){
      .main{ grid-template-columns: 1fr; }
    }

    .leftCol{
      display:grid;
      grid-template-rows: auto 1fr;
      gap: 10px;
    }

    .sideLabel{
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(255,255,255,.85);
      border: 2px solid var(--line);
      border-radius: 12px;
      padding: 10px;
      font-weight: 900;
      color: var(--ink);
      letter-spacing: .3px;
      writing-mode: vertical-rl;
      text-orientation: mixed;
      height: 320px;
    }

    .chartBox{
      background: rgba(255,255,255,.85);
      border: 2px solid var(--line);
      border-radius: 12px;
      padding: 10px;
      height: 320px;
      position:relative;
      overflow:hidden;
    }
    .chartBox .hint{
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(23,49,95,.7);
      font-weight: 800;
      text-align:center;
      padding: 18px;
      line-height: 1.55;
    }
    .chartBox canvas{
      width:100%;
      height:100%;
      display:block;
    }

    .rightCol{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .sectionTitle{
      display:flex;
      gap:10px;
      align-items:center;
      font-weight: 1000;
      color: var(--ink);
      font-size: 16px;
      margin: 2px 0 0;
    }
    .tag{
      padding: 4px 8px;
      border-radius: 999px;
      border: 1.6px solid var(--tag-line);
      background: var(--tag);
      font-size: 12px;
      font-family: var(--mono);
      color:#27406e;
    }

    .grid2{
      display:grid;
      grid-template-columns: 220px 1fr 1fr 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 1180px){
      .grid2{ grid-template-columns: 1fr 1fr; }
    }

    .gridParams{
      display:grid;
      grid-template-columns: 200px 1fr 1fr 1fr 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 1180px){
      .gridParams{ grid-template-columns: 1fr 1fr; }
    }

    .pill{
      border: 1.6px solid rgba(33,59,106,.65);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,.78);
    }
    .pill .lbl{
      font-weight: 900;
      color: var(--label);
      font-size: 13px;
      margin-bottom: 6px;
    }
    .pill .sub{
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
      line-height: 1.4;
    }

    .colorA{ background: var(--orange); }
    .colorB{ background: var(--yellow); }
    .colorC{ background: var(--green); }
    .colorD{ background: var(--blue); }
    .colorE{ background: var(--gray); }

    .metrics{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
    }
    @media (max-width: 1180px){
      .metrics{ grid-template-columns: 1fr 1fr; }
    }
    .metric{
      background: rgba(255,255,255,.86);
      border: 2px solid rgba(33,59,106,.65);
      border-radius: 12px;
      padding: 10px;
      font-weight: 900;
      color:#17315f;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .metric span{
      font-family: var(--mono);
      font-weight: 900;
      color:#0b2d5c;
    }
    .metric .arrow{
      color:#1d3f77;
      font-weight: 1000;
    }

    .desc{
      padding: 12px;
      background: rgba(255,255,255,.82);
      border-top: 2px solid var(--line);
      line-height: 1.75;
      color:#1b2f55;
      font-size: 14px;
    }
    .desc b{ color:#0b2d5c; }

    .footer{
      margin-top: 10px;
      color:#2b4a83;
      font-size: 12.5px;
      font-family: var(--mono);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="titlebar">
      <div>
        <h1>1. 云端部署界面 · 多模态协同数据生成</h1>
        <div class="sub">
          基于 <b>MMDiT（Multi-Modal Diffusion Transformer）</b> 的氧化锌回转窑多模态数据生成：联合建模火焰/物料视觉与温度/压力/转速等 DCS 变量，支持条件控制生成特定故障工况与边缘极端场景数据，用于缓解样本稀缺与分布不均衡。
        </div>
      </div>
      <div class="badge" id="buildId">BUILD-—</div>
    </div>

    <div class="panel">

      <!-- 顶部选择区（参考截图风格） -->
      <div class="gridTop">
        <div class="block">
          <div class="lbl">语言</div>
          <select>
            <option>Zn/En</option>
            <option>Zh/En</option>
            <option>中文</option>
            <option>English</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">功能选择</div>
          <select>
            <option>多模态协同数据生成（MMDiT）</option>
            <option>工况识别/评估</option>
            <option>数据预处理/对齐</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">模型选择</div>
          <select>
            <option>MMDiT (Multi-Modal Diffusion Transformer)</option>
            <option>DiT</option>
            <option>MM-DiT-Lite</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">模型规格选择</div>
          <select>
            <option>MMDiT-S/2</option>
            <option>MMDiT-S/4</option>
            <option>MMDiT-B/2</option>
            <option>MMDiT-B/4</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">模型路径</div>
          <input class="mono" type="text" value="/home/liuyan/Research/MMDiTModel" />
        </div>

        <div class="block">
          <div class="lbl">实验设置</div>
          <select>
            <option>Train / Inference / Evaluation</option>
            <option>Train</option>
            <option>Inference</option>
            <option>Evaluation</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">引入预训练权重</div>
          <select>
            <option>Yes</option>
            <option>No</option>
          </select>
        </div>

        <div class="block" style="grid-column: span 3;">
          <div class="lbl">检查点路径</div>
          <input class="mono" type="text" value="/home/liuyan/Research/MMDiTModel/checkpoints/final_ema.pt" />
        </div>

        <div class="block">
          <div class="lbl">训练方式</div>
          <select>
            <option>原始训练 / 全量微调 / LoRA</option>
            <option>原始训练</option>
            <option>全量微调</option>
            <option>LoRA</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">数据路径</div>
          <input class="mono" type="text" value="/home/liuyan/Dataset/ZnKiln" />
        </div>

        <div class="block" style="grid-column: span 2;">
          <div class="lbl">数据集</div>
          <select>
            <option>RGB + DCS（联合生成）</option>
            <option>RGB</option>
            <option>DCS</option>
            <option>RGB + INF + DCS</option>
          </select>
        </div>

        <div class="block">
          <div class="lbl">预览数据集</div>
          <button class="btn">预览数据集</button>
        </div>
      </div>

      <!-- 主体区域 -->
      <div class="main">
        <!-- 左侧：训练可视化 -->
        <div class="leftCol">
          <div style="display:flex; gap:10px;">
            <div class="sideLabel">训练过程可视化</div>
            <div class="chartBox">
              <canvas id="lossChart"></canvas>
              <div class="hint" id="chartHint">
                Loss 曲线（original / smoothed）<br/>
                页面可在浏览器直接访问；曲线由后端日志或本地上传的训练记录驱动
              </div>
            </div>
          </div>
        </div>

        <!-- 右侧：核心参数、模型参数、生成与评估 -->
        <div class="rightCol">
          <div class="sectionTitle">
            核心参数设置 <span class="tag">Core</span>
          </div>

          <div class="gridParams">
            <div class="pill colorA">
              <div class="lbl">学习率</div>
              <input type="number" value="0.0001" step="0.0001" />
              <div class="sub">AdamW 初始学习率</div>
            </div>

            <div class="pill colorA">
              <div class="lbl">训练轮次</div>
              <input type="number" value="500" step="1" />
              <div class="sub">总 epoch</div>
            </div>

            <div class="pill colorA">
              <div class="lbl">批次大小</div>
              <input type="number" value="16" step="1" />
              <div class="sub">Batch size</div>
            </div>

            <div class="pill colorA">
              <div class="lbl">计算类型</div>
              <select>
                <option>bf16</option>
                <option>fp16</option>
                <option>fp32</option>
              </select>
              <div class="sub">混合精度设置</div>
            </div>

            <div class="pill colorA">
              <div class="lbl">设备选择</div>
              <select>
                <option>cuda:0</option>
                <option>cuda:1</option>
                <option>cuda:2</option>
                <option>cuda:3</option>
              </select>
              <div class="sub">单卡训练/推理</div>
            </div>

            <div class="pill colorA">
              <div class="lbl">其他参数</div>
              <input type="text" value="--grad_clip 1.0 --ema 0.9999" />
              <div class="sub">命令行参数补充</div>
            </div>
          </div>

          <div class="sectionTitle" style="margin-top:4px;">
            模型参数设置 <span class="tag">Architecture</span>
          </div>

          <div class="gridParams">
            <div class="pill colorB">
              <div class="lbl">网络深度</div>
              <input type="number" value="12" step="1" />
              <div class="sub">Transformer Depth</div>
            </div>

            <div class="pill colorB">
              <div class="lbl">隐藏层维度</div>
              <input type="number" value="384" step="1" />
              <div class="sub">Hidden size</div>
            </div>

            <div class="pill colorB">
              <div class="lbl">切块大小</div>
              <input type="number" value="2" step="1" />
              <div class="sub">Patch size</div>
            </div>

            <div class="pill colorB">
              <div class="lbl">注意力头数</div>
              <input type="number" value="6" step="1" />
              <div class="sub">Num heads</div>
            </div>

            <div class="pill colorB" style="grid-column: span 2;">
              <div class="lbl">检查点保存路径</div>
              <input class="mono" type="text" value="/home/liuyan/Research/MMDiTModel/checkpoints/EMA_xxx.pt" />
              <div class="sub">保存 EMA 权重与训练快照</div>
            </div>
          </div>

          <div class="sectionTitle" style="margin-top:4px;">
            生成与保存 <span class="tag">Generation</span>
          </div>

          <div class="gridParams">
            <div class="pill colorC">
              <div class="lbl">执行推理过程</div>
              <select>
                <option>Yes</option>
                <option>No</option>
              </select>
              <div class="sub">启动条件生成</div>
            </div>

            <div class="pill colorC">
              <div class="lbl">类别生成</div>
              <select>
                <option>All</option>
                <option>Over-burning</option>
                <option>Normal</option>
                <option>Under-burning</option>
              </select>
              <div class="sub">指定工况条件</div>
            </div>

            <div class="pill colorC">
              <div class="lbl">每类生成样本数</div>
              <input type="number" value="500" step="1" />
              <div class="sub">Per-class count</div>
            </div>

            <div class="pill colorC" style="grid-column: span 3;">
              <div class="lbl">数据保存路径</div>
              <input class="mono" type="text" value="/home/liuyan/Dataset/ZnKiln/Gen" />
              <div class="sub">保存 RGB 与 DCS 联合生成结果</div>
            </div>
          </div>

          <div class="sectionTitle" style="margin-top:4px;">
            评估与指标 <span class="tag">Evaluation</span>
          </div>

          <div class="gridParams">
            <div class="pill colorD">
              <div class="lbl">执行评价过程</div>
              <select>
                <option>Yes</option>
                <option>No</option>
              </select>
              <div class="sub">生成质量评估</div>
            </div>

            <div class="pill colorD" style="grid-column: span 5;">
              <div class="lbl">指标输出界面</div>
              <div class="metrics">
                <div class="metric">JFD <span>16.28</span> <span class="arrow">↓</span></div>
                <div class="metric">JKID <span>11.35</span> <span class="arrow">↓</span></div>
                <div class="metric">GCD <span>0.75</span> <span class="arrow">↓</span></div>
                <div class="metric">CMCD <span>75.75</span> <span class="arrow">↓</span></div>
                <div class="metric">IMSD <span>0.02</span> <span class="arrow">↓</span></div>
              </div>
            </div>
          </div>

          <div class="grid2" style="margin-top:10px;">
            <div class="block">
              <div class="lbl">一键训练</div>
              <button class="btn">开始训练</button>
            </div>
            <div class="block">
              <div class="lbl">一键生成</div>
              <button class="btn">开始生成</button>
            </div>
            <div class="block">
              <div class="lbl">一键评估</div>
              <button class="btn">开始评估</button>
            </div>
            <div class="block" style="grid-column: span 2;">
              <div class="lbl">运行日志</div>
              <input class="mono" type="text" value="[READY] MMDiT pipeline initialized. Waiting for action..." />
            </div>
          </div>
        </div>
      </div>

      <!-- 底部：文字说明（来自你提供的段落，改成页面内明确介绍） -->
      <div class="desc">
        <b>研究背景：</b> 针对氧化锌回转窑冶炼过程中工况数据获取困难、多模态样本（视觉图像与传感器参数）时空对齐复杂的问题，本系统采用
        <b>MMDiT（Multi-Modal Diffusion Transformer）</b> 构建多模态协同数据生成模型。模型以 Transformer 替代传统扩散模型中的 U-Net 主干，
        强化对复杂热工过程的长程依赖建模；通过多模态交叉注意力显式捕捉火焰/物料视觉特征与温度/压力/转速等 DCS 时序之间的强耦合关系。
        系统支持条件控制生成特定故障工况或极端边缘场景的联合样本，解决样本稀缺与分布不均衡，服务于智能监测与优化控制的训练数据构建。
      </div>
    </div>

    <div class="footer">
      <div>Page: GitHub Pages compatible (static HTML)</div>
      <div id="stamp">BUILD: —</div>
    </div>
  </div>

  <script>
    // 生成 build id：方便你确认 Pages 内容是否已同步更新
    const bid = "BUILD-" + Math.random().toString(16).slice(2,10).toUpperCase();
    document.getElementById("buildId").textContent = bid;
    document.getElementById("stamp").textContent = "BUILD: " + bid;

    // 轻量画一个“loss 曲线”占位（不依赖任何库）
    const canvas = document.getElementById("lossChart");
    const hint = document.getElementById("chartHint");
    const ctx = canvas.getContext("2d");

    function resizeCanvas(){
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.max(1, Math.floor(rect.width * devicePixelRatio));
      canvas.height = Math.max(1, Math.floor(rect.height * devicePixelRatio));
      draw();
    }

    function draw(){
      const w = canvas.width, h = canvas.height;
      ctx.clearRect(0,0,w,h);

      // 背景
      ctx.fillStyle = "rgba(255,255,255,0.0)";
      ctx.fillRect(0,0,w,h);

      // 坐标轴
      ctx.lineWidth = 2 * devicePixelRatio;
      ctx.strokeStyle = "rgba(29,63,119,0.55)";
      ctx.beginPath();
      ctx.moveTo(42*devicePixelRatio, 18*devicePixelRatio);
      ctx.lineTo(42*devicePixelRatio, h-30*devicePixelRatio);
      ctx.lineTo(w-18*devicePixelRatio, h-30*devicePixelRatio);
      ctx.stroke();

      // 曲线数据（固定可视化，避免“示例”文字）
      const n = 120;
      const x0 = 42*devicePixelRatio, y0 = h-30*devicePixelRatio;
      const x1 = w-18*devicePixelRatio, y1 = 18*devicePixelRatio;
      const dx = (x1 - x0) / (n-1);

      // original
      ctx.strokeStyle = "rgba(29,63,119,0.85)";
      ctx.beginPath();
      for(let i=0;i<n;i++){
        const t = i/(n-1);
        const loss = 0.26*Math.exp(-5.2*t) + 0.01 + 0.008*Math.sin(18*t); // 平滑下降
        const x = x0 + i*dx;
        const y = y0 - loss*(y0-y1)/0.28;
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      }
      ctx.stroke();

      // smoothed
      ctx.strokeStyle = "rgba(29,63,119,0.35)";
      ctx.beginPath();
      for(let i=0;i<n;i++){
        const t = i/(n-1);
        const loss = 0.26*Math.exp(-5.4*t) + 0.012; // 更平滑
        const x = x0 + i*dx;
        const y = y0 - loss*(y0-y1)/0.28;
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      }
      ctx.stroke();

      // 图例
      ctx.fillStyle = "rgba(11,45,92,0.9)";
      ctx.font = `${12*devicePixelRatio}px ui-sans-serif`;
      ctx.fillText("original", w-170*devicePixelRatio, 34*devicePixelRatio);
      ctx.fillStyle = "rgba(29,63,119,0.85)";
      ctx.fillRect(w-200*devicePixelRatio, 24*devicePixelRatio, 18*devicePixelRatio, 3*devicePixelRatio);

      ctx.fillStyle = "rgba(11,45,92,0.9)";
      ctx.fillText("smoothed", w-170*devicePixelRatio, 54*devicePixelRatio);
      ctx.fillStyle = "rgba(29,63,119,0.35)";
      ctx.fillRect(w-200*devicePixelRatio, 44*devicePixelRatio, 18*devicePixelRatio, 3*devicePixelRatio);
    }

    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();
    hint.style.display = "none"; // 有图就隐藏占位说明
  </script>
</body>
</html>
